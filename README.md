# ETL-from-API-Open-Meteo
ETL пайплайна получения данных по API Open-meteo

Задание 1
ETL-пайплайн для данных прогноза погоды
Общая структура проекта:

Загрузка данных (Extract):
- Запрос к API Open-Meteo для получения JSON-данных о погоде.
- Используется библиотека requests для HTTP-запроса.
Трансформация данных (Transform):
Преобразование единиц измерения (например, °F в °C, узлы в м/с, дюймы в мм, футы в метры).
Вычисление средних значений за 24 часа и за световой день (на основе sunrise).
Вычисление продолжительности светового дня в часах.
Преобразование времени в формат ISO 8601.
Обработка дубликатов и объединение почасовых и ежедневных данных.


Выгрузка данных (Load):
Сохранение результата в CSV-файл с указанными столбцами.
Тестирование:
Проверка корректности загрузки данных, трансформаций и выгрузки.


Документация:Комментарии в коде. Описание логики и решений.


Структура кода:
extract_weather_data: Загружает данные с API, обрабатывает ошибки HTTP.
convert_units: Преобразует единицы измерения для температуры, скорости ветра, осадков и видимости.
unix_to_iso: Преобразует Unix-время в формат ISO 8601.
transform_weather_data: Выполняет основные трансформации, включая агрегацию почасовых и ежедневных данных.
load_to_csv: Сохраняет данные в CSV.
run_etl_pipeline: Основная функция, объединяющая ETL-шаги.
TestETLPipeline: Класс с юнит-тестами для проверки ключевых функций.

Задание 2
Пояснение:
Docker Compose: Конфигурация запускает контейнер PostgreSQL с базой weather_forecast, пользователем user и паролем password. Порт 5432 мапится на хост.
init.sql: Создаёт таблицу weather_data с полями, соответствующими итоговой таблице из задания 1. Поле date выбрано как PRIMARY KEY для предотвращения дубликатов. Индекс на date ускоряет поиск.
Обработка дубликатов: Использование PRIMARY KEY на поле date предотвращает вставку записей с одинаковой датой. В коде Python будет реализована обработка конфликтов с помощью ON CONFLICT.



